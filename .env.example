# =============================================================================
# Advanced RAG API â€” Environment Variables
# =============================================================================
# Copy to .env and customize. All values below are defaults.

# --- Pipeline ---
PIPELINE_MODEL_NAME=Qwen/Qwen2.5-3B-Instruct
PIPELINE_EMBEDDING_MODEL=BAAI/bge-large-en-v1.5
PIPELINE_RERANKER_MODEL=cross-encoder/ms-marco-MiniLM-L6-v2
PIPELINE_TOP_K_RETRIEVE=20
PIPELINE_TOP_K_RERANK=3          # Step 7 finding: chunks 4-5 are noise
PIPELINE_MAX_NEW_TOKENS=80
PIPELINE_TEMPERATURE=0.1
PIPELINE_LOAD_IN_4BIT=true       # Required for 6 GB VRAM

# --- Semantic Cache (Redis) ---
CACHE_REDIS_URL=redis://localhost:6379/0
CACHE_SIMILARITY_THRESHOLD=0.92  # 0.95=conservative, 0.85=aggressive
CACHE_TTL_SECONDS=86400          # 24 hours

# --- Authentication ---
AUTH_ENABLED=false                # Set true in non-local environments
AUTH_API_KEY=                     # Generate with: openssl rand -hex 32

# --- Circuit Breaker (cost guard for cloud fallback) ---
CB_COST_LIMIT_EUR=5.0
CB_COST_PER_1K_INPUT_TOKENS=0.004
CB_COST_PER_1K_OUTPUT_TOKENS=0.012
CB_WINDOW_SECONDS=3600

# --- API Server ---
API_LOG_LEVEL=INFO
API_HOST=0.0.0.0
API_PORT=8000

# --- External API Keys ---
MISTRAL_API_KEY=                 # For RAGAS evaluation (optional)

# --- Grafana ---
GRAFANA_PASSWORD=admin           # Change immediately in production
